import{u as h,a as p,b as d,c as m,r as l,j as s,M as g}from"./index-18fe480e.js";import{R as x,l as v,a as j,g as C}from"./index-fee63d1e.js";import{j as S,a as k}from"./index-e828a530.js";function R(){const r=h();p(e=>e.create);const a=d(),i=m(e=>e.webhookUrl),[u,n]=l.useState("{}");l.useEffect(()=>{const e=i||"https://steve.com",t=c(a),o=f(e,t);n(o)},[a]);function c(e){return{content:e.content||"",username:e.username||"",avatar_url:e.avatar_url||"",tts:!!e.tts,embeds:(e.embeds||[]).map(t=>({url:t.url,title:t.title,description:t.description,color:t.color,image:t.image?{url:t.image.url}:void 0,footer:t.footer?{text:t.footer.text,icon_url:t.footer.icon_url}:void 0,timestamp:t.timestamp,author:t.author?{url:t.author.url,name:t.author.name,icon_url:t.author.icon_url}:void 0,thumbnail:t.thumbnail?{url:t.thumbnail.url}:void 0,fields:t.fields?t.fields.map(o=>({name:o.name,value:o.value,inline:o.inline})):[]})),components:e.components||[],flags:e.flags||0}}function f(e,t){const o=JSON.stringify(t).replace(/\\/g,"\\\\").replace(/"/g,'\\"');return`curl -X POST "${e}" -H "Content-Type: application/json" -d "${o}"`}return s.jsx(g,{height:"full",onClose:()=>r("/editor"),children:s.jsxs("div",{className:"h-full flex flex-col p-1.5 md:p-3",children:[s.jsx(x,{className:"flex-1 rounded overflow-hidden",height:"100%",width:"100%",value:u,basicSetup:{lineNumbers:!1,foldGutter:!1,indentOnInput:!0},extensions:[v(),S(),j(k())],theme:C,onChange:e=>n(e)}),s.jsx("div",{className:"mt-3 flex justify-end space-x-2",children:s.jsx("button",{className:"border-2 border-dark-7 hover:bg-dark-5 px-3 py-2 rounded text-white",onClick:()=>r("/editor"),children:"Cancel"})})]})})}export{R as default};
