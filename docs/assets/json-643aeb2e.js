import{u as c,a as u,b as h,r as n,j as s,M as p}from"./index-e7a35ca5.js";import{R as m,l as f,j as g,a as x,g as b,b as j}from"./index-436a4e3d.js";import{p as v}from"./restoreSchema-0c90c725.js";function w(){const a=c(),i=u(e=>e.create),t=h(),[r,o]=n.useState("{}");n.useEffect(()=>{o(JSON.stringify(t,null,2))},[t]);function l(){try{const e=JSON.parse(r),d=v(e);t.replace(d),a("/editor")}catch(e){console.error(e),i({type:"error",title:"Failed to parse message",message:"The message you entered is not a valid Discord webhook message. Please check for mistakes in your message and try again."})}}return s.jsx(p,{height:"full",onClose:()=>a("/editor"),children:s.jsxs("div",{className:"h-full flex flex-col p-1.5 md:p-3",children:[s.jsx(m,{className:"flex-1 rounded overflow-hidden",height:"100%",width:"100%",value:r,basicSetup:{lineNumbers:!1,foldGutter:!1,indentOnInput:!0},extensions:[f(),g(),x(j())],theme:b,onChange:e=>o(e)}),s.jsxs("div",{className:"mt-3 flex justify-end space-x-2",children:[s.jsx("button",{className:"border-2 border-dark-7 hover:bg-dark-5 px-3 py-2 rounded text-white",onClick:()=>a("/editor"),children:"Cancel"}),s.jsx("button",{className:"bg-blurple hover:bg-blurple-dark px-3 py-2 rounded text-white",onClick:l,children:"Save"})]})]})})}export{w as default};
