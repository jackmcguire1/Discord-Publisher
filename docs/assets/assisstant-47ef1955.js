import{u as S,a as k,c as C,r as a,e as M,b as r,j as e,M as A,f as m}from"./index-be6118cb.js";import E from"./MessagePreview-f718bdd2.js";import{p as I}from"./restoreSchema-5ebe265a.js";import{S as O}from"./index-2e47b4af.js";import"./index-e4f144c6.js";function q(){const c=S(),f=k(t=>t.create),u=C(t=>t.guildId),[h,x]=a.useState([]),[g,l]=a.useState(null),[d,p]=a.useState(""),[n,o]=a.useState(null),{data:s,mutate:b,isLoading:i}=M();a.useEffect(()=>{if(s!=null&&s.success)try{const t=I(JSON.parse(s.data.data));o(t),l(s.data.data)}catch(t){console.log(t),f({title:"Something went wrong",message:"Your prompt has produced an invalid message, please try again with a different prompt.",type:"error"})}},[s]),a.useEffect(()=>{l(JSON.stringify(r.getState())),o(r.getState())},[]);function v(){i||u&&(b({guildId:u,req:{base_data:g,prompt:d}}),x(t=>[...t,d]),p(""))}function j(){l(null),o(null),x([])}function w(){l(JSON.stringify(r.getState())),o(r.getState())}function y(){n&&(r.setState(n),c("/editor"))}return e.jsx(A,{height:"full",onClose:()=>c("/editor"),children:e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-1/2 p-5 overflow-y-hidden flex flex-col",children:[e.jsxs("div",{className:"text-2xl font-medium text-gray-200 mb-5 flex items-center space-x-3",children:[e.jsx(O,{className:"h-7 w-7 text-yellow"}),e.jsx("div",{children:"AI Assistant"})]}),e.jsx("div",{className:"flex-auto space-y-3 overflow-y-auto mb-5",children:h.map((t,N)=>e.jsx("div",{className:"text-gray-300 px-3 py-2 rounded-md bg-dark-2 whitespace-pre-line",children:t},N))}),e.jsxs("div",{className:"flex-none",children:[e.jsxs("div",{className:"flex justify-end space-x-3 mb-3",children:[e.jsx("button",{className:"text-white px-3 py-2 rounded border-2 border-red hover:bg-red",onClick:w,children:"Restart"}),e.jsx("button",{className:"text-white px-3 py-2 rounded border-2 border-red hover:bg-red",onClick:j,children:"Clear All"}),e.jsx("button",{className:"text-white px-3 py-2 rounded border-2 border-green hover:bg-green",onClick:y,children:"Save to Editor"})]}),e.jsx("textarea",{value:d,onChange:t=>p(t.target.value),className:"bg-dark-2 px-3 py-2 rounded w-full text-white focus:outline-none h-32 mt-0 mb-3",placeholder:"Enter a prompt..."}),e.jsx("div",{className:"flex justify-end space-x-3",children:e.jsxs("button",{className:m("text-white px-3 py-2 rounded flex items-center space-x-3",i?"bg-dark-5 cursor-not-allowed ":"bg-blurple"),onClick:v,children:[i&&e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"h-4 w-4 rounded-full bg-blurple"}),e.jsx("div",{className:"h-4 w-4 rounded-full bg-blurple animate-ping absolute inset-0"})]}),e.jsx("div",{children:"Submit"})]})})]})]}),e.jsx("div",{className:"w-1/2 rounded-r-xl bg-dark-4 overflow-y-auto",children:e.jsx("div",{className:m("rounded text-white h-full px-5 py-3",i&&"animate-pulse"),children:n&&e.jsx(E,{msg:n})})})]})})}export{q as default};
