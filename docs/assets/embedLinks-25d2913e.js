import{ar as v,r as u,j as a,C as J,U as Q,as as Z,a as G,E as x,$ as ee}from"./index-be7f8796.js";import{T as te}from"./ToolsBackButton-890de9c6.js";import re from"./MessagePreview-c5f0599c.js";import{C as ne}from"./CheckBox-17e2ff57.js";import"./index-e4f144c6.js";function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function A(e,t){if(e==null)return{};var r,n,o={},s=Object.keys(e);for(n=0;n<s.length;n++)t.indexOf(r=s[n])>=0||(o[r]=e[r]);return o}function I(e){var t=u.useRef(e),r=u.useRef(function(n){t.current&&t.current(n)});return t.current=e,r.current}var k=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=1),e>r?r:e<t?t:e},N=function(e){return"touches"in e},H=function(e){return e&&e.ownerDocument.defaultView||self},q=function(e,t,r){var n=e.getBoundingClientRect(),o=N(t)?function(s,i){for(var l=0;l<s.length;l++)if(s[l].identifier===i)return s[l];return s[0]}(t.touches,r):t;return{left:k((o.pageX-(n.left+H(e).pageXOffset))/n.width),top:k((o.pageY-(n.top+H(e).pageYOffset))/n.height)}},B=function(e){!N(e)&&e.preventDefault()},V=v.memo(function(e){var t=e.onMove,r=e.onKey,n=A(e,["onMove","onKey"]),o=u.useRef(null),s=I(t),i=I(r),l=u.useRef(null),c=u.useRef(!1),f=u.useMemo(function(){var U=function(d){B(d),(N(d)?d.touches.length>0:d.buttons>0)&&o.current?s(q(o.current,d,l.current)):y(!1)},_=function(){return y(!1)};function y(d){var h=c.current,g=H(o.current),w=d?g.addEventListener:g.removeEventListener;w(h?"touchmove":"mousemove",U),w(h?"touchend":"mouseup",_)}return[function(d){var h=d.nativeEvent,g=o.current;if(g&&(B(h),!function(R,E){return E&&!N(R)}(h,c.current)&&g)){if(N(h)){c.current=!0;var w=h.changedTouches||[];w.length&&(l.current=w[0].identifier)}g.focus(),s(q(g,h,l.current)),y(!0)}},function(d){var h=d.which||d.keyCode;h<37||h>40||(d.preventDefault(),i({left:h===39?.05:h===37?-.05:0,top:h===40?.05:h===38?-.05:0}))},y]},[i,s]),p=f[0],j=f[1],b=f[2];return u.useEffect(function(){return b},[b]),v.createElement("div",S({},n,{onTouchStart:p,onMouseDown:p,className:"react-colorful__interactive",ref:o,onKeyDown:j,tabIndex:0,role:"slider"}))}),P=function(e){return e.filter(Boolean).join(" ")},X=function(e){var t=e.color,r=e.left,n=e.top,o=n===void 0?.5:n,s=P(["react-colorful__pointer",e.className]);return v.createElement("div",{className:s,style:{top:100*o+"%",left:100*r+"%"}},v.createElement("div",{className:"react-colorful__pointer-fill",style:{backgroundColor:t}}))},m=function(e,t,r){return t===void 0&&(t=0),r===void 0&&(r=Math.pow(10,t)),Math.round(r*e)/r},oe=function(e){return ue(O(e))},O=function(e){return e[0]==="#"&&(e=e.substring(1)),e.length<6?{r:parseInt(e[0]+e[0],16),g:parseInt(e[1]+e[1],16),b:parseInt(e[2]+e[2],16),a:e.length===4?m(parseInt(e[3]+e[3],16)/255,2):1}:{r:parseInt(e.substring(0,2),16),g:parseInt(e.substring(2,4),16),b:parseInt(e.substring(4,6),16),a:e.length===8?m(parseInt(e.substring(6,8),16)/255,2):1}},ae=function(e){return ie(le(e))},se=function(e){var t=e.s,r=e.v,n=e.a,o=(200-t)*r/100;return{h:m(e.h),s:m(o>0&&o<200?t*r/100/(o<=100?o:200-o)*100:0),l:m(o/2),a:m(n,2)}},D=function(e){var t=se(e);return"hsl("+t.h+", "+t.s+"%, "+t.l+"%)"},le=function(e){var t=e.h,r=e.s,n=e.v,o=e.a;t=t/360*6,r/=100,n/=100;var s=Math.floor(t),i=n*(1-r),l=n*(1-(t-s)*r),c=n*(1-(1-t+s)*r),f=s%6;return{r:m(255*[n,l,i,i,c,n][f]),g:m(255*[c,n,n,l,i,i][f]),b:m(255*[i,i,c,n,n,l][f]),a:m(o,2)}},M=function(e){var t=e.toString(16);return t.length<2?"0"+t:t},ie=function(e){var t=e.r,r=e.g,n=e.b,o=e.a,s=o<1?M(m(255*o)):"";return"#"+M(t)+M(r)+M(n)+s},ue=function(e){var t=e.r,r=e.g,n=e.b,o=e.a,s=Math.max(t,r,n),i=s-Math.min(t,r,n),l=i?s===t?(r-n)/i:s===r?2+(n-t)/i:4+(t-r)/i:0;return{h:m(60*(l<0?l+6:l)),s:m(s?i/s*100:0),v:m(s/255*100),a:o}},ce=v.memo(function(e){var t=e.hue,r=e.onChange,n=P(["react-colorful__hue",e.className]);return v.createElement("div",{className:n},v.createElement(V,{onMove:function(o){r({h:360*o.left})},onKey:function(o){r({h:k(t+360*o.left,0,360)})},"aria-label":"Hue","aria-valuenow":m(t),"aria-valuemax":"360","aria-valuemin":"0"},v.createElement(X,{className:"react-colorful__hue-pointer",left:t/360,color:D({h:t,s:100,v:100,a:1})})))}),fe=v.memo(function(e){var t=e.hsva,r=e.onChange,n={backgroundColor:D({h:t.h,s:100,v:100,a:1})};return v.createElement("div",{className:"react-colorful__saturation",style:n},v.createElement(V,{onMove:function(o){r({s:100*o.left,v:100-100*o.top})},onKey:function(o){r({s:k(t.s+100*o.left,0,100),v:k(t.v-100*o.top,0,100)})},"aria-label":"Color","aria-valuetext":"Saturation "+m(t.s)+"%, Brightness "+m(t.v)+"%"},v.createElement(X,{className:"react-colorful__saturation-pointer",top:1-t.v/100,left:t.s/100,color:D(t)})))}),Y=function(e,t){if(e===t)return!0;for(var r in e)if(e[r]!==t[r])return!1;return!0},de=function(e,t){return e.toLowerCase()===t.toLowerCase()||Y(O(e),O(t))};function he(e,t,r){var n=I(r),o=u.useState(function(){return e.toHsva(t)}),s=o[0],i=o[1],l=u.useRef({color:t,hsva:s});u.useEffect(function(){if(!e.equal(t,l.current.color)){var f=e.toHsva(t);l.current={hsva:f,color:t},i(f)}},[t,e]),u.useEffect(function(){var f;Y(s,l.current.hsva)||e.equal(f=e.fromHsva(s),l.current.color)||(l.current={hsva:s,color:f},n(f))},[s,e,n]);var c=u.useCallback(function(f){i(function(p){return Object.assign({},p,f)})},[]);return[s,c]}var me=typeof window<"u"?u.useLayoutEffect:u.useEffect,ve=function(){return typeof __webpack_nonce__<"u"?__webpack_nonce__:void 0},K=new Map,pe=function(e){me(function(){var t=e.current?e.current.ownerDocument:document;if(t!==void 0&&!K.has(t)){var r=t.createElement("style");r.innerHTML=`.react-colorful{position:relative;display:flex;flex-direction:column;width:200px;height:200px;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;cursor:default}.react-colorful__saturation{position:relative;flex-grow:1;border-color:transparent;border-bottom:12px solid #000;border-radius:8px 8px 0 0;background-image:linear-gradient(0deg,#000,transparent),linear-gradient(90deg,#fff,hsla(0,0%,100%,0))}.react-colorful__alpha-gradient,.react-colorful__pointer-fill{content:"";position:absolute;left:0;top:0;right:0;bottom:0;pointer-events:none;border-radius:inherit}.react-colorful__alpha-gradient,.react-colorful__saturation{box-shadow:inset 0 0 0 1px rgba(0,0,0,.05)}.react-colorful__alpha,.react-colorful__hue{position:relative;height:24px}.react-colorful__hue{background:linear-gradient(90deg,red 0,#ff0 17%,#0f0 33%,#0ff 50%,#00f 67%,#f0f 83%,red)}.react-colorful__last-control{border-radius:0 0 8px 8px}.react-colorful__interactive{position:absolute;left:0;top:0;right:0;bottom:0;border-radius:inherit;outline:none;touch-action:none}.react-colorful__pointer{position:absolute;z-index:1;box-sizing:border-box;width:28px;height:28px;transform:translate(-50%,-50%);background-color:#fff;border:2px solid #fff;border-radius:50%;box-shadow:0 2px 4px rgba(0,0,0,.2)}.react-colorful__interactive:focus .react-colorful__pointer{transform:translate(-50%,-50%) scale(1.1)}.react-colorful__alpha,.react-colorful__alpha-pointer{background-color:#fff;background-image:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill-opacity=".05"><path d="M8 0h8v8H8zM0 8h8v8H0z"/></svg>')}.react-colorful__saturation-pointer{z-index:3}.react-colorful__hue-pointer{z-index:2}`,K.set(t,r);var n=ve();n&&r.setAttribute("nonce",n),t.head.appendChild(r)}},[])},ge=function(e){var t=e.className,r=e.colorModel,n=e.color,o=n===void 0?r.defaultColor:n,s=e.onChange,i=A(e,["className","colorModel","color","onChange"]),l=u.useRef(null);pe(l);var c=he(r,o,s),f=c[0],p=c[1],j=P(["react-colorful",t]);return v.createElement("div",S({},i,{ref:l,className:j}),v.createElement(fe,{hsva:f,onChange:p}),v.createElement(ce,{hue:f.h,onChange:p,className:"react-colorful__last-control"}))},xe={defaultColor:"000",toHsva:oe,fromHsva:function(e){return ae({h:e.h,s:e.s,v:e.v,a:1})},equal:de},be=function(e){return v.createElement(ge,S({},e,{colorModel:xe}))};function _e({value:e,onChange:t}){const[r,n]=u.useState(!1);function o(l){let c=l.trim();for(;c.startsWith("#");)c=c.substring(1);if(c){const f=parseInt(c,16);isNaN(f)?t(void 0):t(f)}else t(void 0)}const s=u.useMemo(()=>e||e===0?e.toString(16).padStart(6,"0"):"",[e]),i=s?"#"+s:"#1f2225";return a.jsxs("div",{className:"flex space-x-2",children:[a.jsxs("div",{className:"flex",children:[a.jsx("div",{className:"bg-dark-1 rounded-l flex items-center px-2 text-gray-300",children:"#"}),a.jsx("input",{type:"text",className:"bg-dark-2 rounded-r p-2 w-full no-ring font-light text-white focus:outline-none",value:s,onChange:l=>o(l.target.value),placeholder:"rrggbb"})]}),a.jsxs(J,{onClickOutside:()=>n(!1),className:"relative",children:[a.jsx("div",{className:"w-12 h-full rounded cursor-pointer relative bg-dark-5",style:{backgroundColor:i},role:"button",onClick:()=>n(!r)}),r&&a.jsx("div",{className:"absolute bottom-14 right-0",children:a.jsx(be,{color:"#"+s,onChange:o})})]})]})}function we(){const[e,t]=u.useState(""),[r,n]=u.useState(""),[o,s]=u.useState(""),[i,l]=u.useState(void 0),[c,f]=u.useState(""),[p,j]=u.useState(""),[b,U]=u.useState(""),[_,y]=u.useState(""),[d,h]=u.useState(""),[g,w]=u.useState(!0),R=u.useMemo(()=>({content:"https://message.style/e/123",tts:!1,username:"Some User",embeds:[{id:Q(),url:r||void 0,title:e||void 0,description:o||void 0,color:i,author:_?{name:_,url:d||void 0}:void 0,provider:p?{name:p,url:b||void 0}:void 0,fields:[],thumbnail:c&&!g?{url:c}:void 0,image:c&&g?{url:c}:void 0}],components:[],actions:{}}),[e,r,o,i,c,p,b,_,d,g]),[E,z]=u.useState(""),F=Z(),T=G(C=>C.create);function W(){if(!r){T({title:"Some required fields are missing",message:"Please fill at least the  URL field before creating the embed link",type:"error"});return}F.mutate({url:r,theme_color:i?ee(i):null,og_title:e,og_description:o,og_image:c,og_site_name:p,oe_type:null,oe_author_name:_,oe_author_url:d,oe_provider_name:p,oe_provider_url:b,tw_card:g?"summary_large_image":null},{onSuccess:C=>{C.success?z(C.data.url):T({title:"Failed to create embed link",message:C.error.message,type:"error"})}})}const L=u.useRef(null);function $(){L.current&&(L.current.select(),L.current.setSelectionRange(0,99999),document.execCommand("copy"),T({title:"Copied URL",message:"The URL has been copied to your clipboard",type:"success"}))}return a.jsxs("div",{className:"flex flex-col lg:flex-row h-full flex-auto w-full space-y-10 lg:space-y-0 lg:space-x-10",children:[E?a.jsxs("div",{className:"w-full lg:w-1/2 space-y-5",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"text",className:"bg-dark-2 rounded-l px-3 py-2 text-gray-100 w-full focus:outline-none",value:E,readOnly:!0,ref:L}),a.jsx("button",{className:"px-3 py-2 rounded-r bg-blurple hover:bg-blurple-dark text-white flex-none",onClick:$,children:"Copy Link"})]}),a.jsx("div",{className:"flex",children:a.jsx("button",{className:"px-3 py-2 rounded border-2 border-dark-7 hover:bg-dark-6 cursor-pointer text-white",onClick:()=>z(""),children:"Create New"})})]}):a.jsxs("div",{className:"w-full lg:w-1/2 space-y-3",children:[a.jsx(x,{label:"URL",description:"The URL that users will be redirected to when clicking your embed link.",value:r,onChange:n,type:"url"}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(x,{label:"Title",value:e,onChange:t,maxLength:256}),a.jsxs("div",{children:[a.jsx("div",{className:"uppercase text-gray-300 text-sm font-medium mb-1.5",children:"Color"}),a.jsx(_e,{value:i,onChange:l})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(x,{label:"Provider",value:p,onChange:j,maxLength:256}),a.jsx(x,{label:"Provider URL",value:b,onChange:U})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(x,{label:"Author",value:_,onChange:y,maxLength:256}),a.jsx(x,{label:"Author URL",value:d,onChange:h})]}),a.jsx(x,{label:"Description",value:o,onChange:s,type:"textarea",maxLength:4096}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsxs("div",{children:[a.jsx("div",{className:"uppercase text-gray-300 text-sm font-medium mb-1.5",children:"Large"}),a.jsx(ne,{checked:!g,onChange:w,height:10})]}),a.jsx(x,{label:"Image URL",value:c,onChange:f,type:"url",imageUpload:!0,className:"w-full"})]}),a.jsx("div",{className:"flex justify-end pt-3",children:a.jsx("button",{className:"px-3 py-2 rounded text-white bg-blurple hover:bg-blurple-dark",onClick:W,children:"Create Link"})})]}),a.jsx("div",{className:"w-full lg:w-1/2",children:a.jsx(re,{msg:R})})]})}function Ee(){return a.jsx("div",{className:"overflow-y-auto w-full",children:a.jsxs("div",{className:"flex flex-col max-w-5xl mx-auto px-4 w-full my-5 mb-20 lg:mt-20 space-y-20",children:[a.jsx(te,{}),a.jsxs("div",{children:[a.jsxs("div",{className:"mb-10",children:[a.jsx("h1",{className:"text-white font-medium mb-3 text-2xl",children:"Embed Links"}),a.jsx("h2",{className:"text-gray-400 font-light text-sm",children:"Embed links are a way to share rich embeds with others without needing to send the actual embed. They only support a subset of the features of the actual embeds but can be send anywhere."})]}),a.jsx(we,{})]})]})})}export{Ee as default};
